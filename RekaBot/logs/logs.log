2025-08-30 21:06:00,588 INFO Update id=791623800 is not handled. Duration 1 ms by bot id=7498846254
2025-08-30 21:06:00,590 ERROR Cause exception while process update id=791623800 by bot id=7498846254
TypeError: start_data() got an unexpected keyword argument 'phone'
Traceback (most recent call last):
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/scripts/bot.py", line 48, in cmd_start
    start_data(id=message.from_user.id, username=message.from_user.username, phone=message.contact, firstDate=datetime.now())
TypeError: start_data() got an unexpected keyword argument 'phone'
2025-08-30 21:06:01,788 ERROR Task exception was never retrieved
future: <Task finished name='Task-19' coro=<periodic_messages() done, defined at /Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/scripts/bot.py:14> exception=TelegramNetworkError('HTTP Client says - ClientOSError: [Errno 2] Can not write request body for https://api.telegram.org/bot7498846254:AAFM-BD7hCWNahIrVwr3jDcCCCZIgjJX_Uk/sendPhoto')>
Traceback (most recent call last):
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiohttp/client_reqrep.py", line 1374, in write_bytes
    await self._body.write_with_length(writer, content_length)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiohttp/payload.py", line 306, in write_with_length
    await self.write(writer)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiohttp/multipart.py", line 1053, in write
    await part.write(writer)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiohttp/payload.py", line 1009, in write
    await self.write_with_length(writer, None)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiohttp/payload.py", line 1054, in write_with_length
    chunk = await self._iter.__anext__()
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/types/input_file.py", line 103, in read
    async with aiofiles.open(self.path, "rb") as f:
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiofiles/base.py", line 63, in __aenter__
    return await self
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiofiles/base.py", line 59, in __await__
    self._obj = yield from self._coro.__await__()
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiofiles/threadpool/__init__.py", line 92, in _open
    f = await loop.run_in_executor(executor, cb)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/thread.py", line 52, in run
    result = self.fn(*self.args, **self.kwargs)
FileNotFoundError: [Errno 2] No such file or directory: 'RekaBot/images/DSC01779.jpg'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/client/session/aiohttp.py", line 177, in make_request
    async with session.post(
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiohttp/client.py", line 1488, in __aenter__
    self._resp: _RetType = await self._coro
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiohttp/client.py", line 770, in _request
    resp = await handler(req)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiohttp/client.py", line 748, in _connect_and_send_request
    await resp.start(conn)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiohttp/client_reqrep.py", line 532, in start
    message, payload = await protocol.read()  # type: ignore[union-attr]
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiohttp/streams.py", line 672, in read
    await self._waiter
aiohttp.client_exceptions.ClientOSError: [Errno 2] Can not write request body for https://api.telegram.org/bot7498846254:AAFM-BD7hCWNahIrVwr3jDcCCCZIgjJX_Uk/sendPhoto

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/scripts/bot.py", line 25, in periodic_messages
    await bot.send_photo(chat_id=user, caption="""
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/client/bot.py", line 3001, in send_photo
    return await self(call, request_timeout=request_timeout)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/client/bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/client/session/base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/client/session/aiohttp.py", line 184, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 2] Can not write request body for https://api.telegram.org/bot7498846254:AAFM-BD7hCWNahIrVwr3jDcCCCZIgjJX_Uk/sendPhoto
2025-08-30 21:06:38,766 WARNING Received SIGINT signal
2025-08-30 21:06:38,769 INFO Polling stopped for bot @chuvarvla_bot id=7498846254 - 'testbot'
2025-08-30 21:06:38,769 INFO Polling stopped
2025-08-30 21:06:41,321 DEBUG Using selector: KqueueSelector
2025-08-30 21:06:41,322 DEBUG Using selector: KqueueSelector
2025-08-30 21:06:41,322 INFO Start polling
2025-08-30 21:06:41,596 INFO Run polling for bot @chuvarvla_bot id=7498846254 - 'testbot'
2025-08-30 21:06:42,197 CRITICAL Ошибка записи данных null value in column "Телефон" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (13, 5912776119, Aridkruchinin, null, 2025-08-30 21:06:42.193282, null, null, null, null).

2025-08-30 21:06:42,757 INFO Update id=791623801 is handled. Duration 564 ms by bot id=7498846254
2025-08-30 21:06:43,205 ERROR Task exception was never retrieved
future: <Task finished name='Task-9' coro=<periodic_messages() done, defined at /Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/scripts/bot.py:14> exception=TelegramNetworkError('HTTP Client says - ClientOSError: [Errno 2] Can not write request body for https://api.telegram.org/bot7498846254:AAFM-BD7hCWNahIrVwr3jDcCCCZIgjJX_Uk/sendPhoto')>
Traceback (most recent call last):
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiohttp/client_reqrep.py", line 1374, in write_bytes
    await self._body.write_with_length(writer, content_length)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiohttp/payload.py", line 306, in write_with_length
    await self.write(writer)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiohttp/multipart.py", line 1053, in write
    await part.write(writer)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiohttp/payload.py", line 1009, in write
    await self.write_with_length(writer, None)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiohttp/payload.py", line 1054, in write_with_length
    chunk = await self._iter.__anext__()
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/types/input_file.py", line 103, in read
    async with aiofiles.open(self.path, "rb") as f:
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiofiles/base.py", line 63, in __aenter__
    return await self
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiofiles/base.py", line 59, in __await__
    self._obj = yield from self._coro.__await__()
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiofiles/threadpool/__init__.py", line 92, in _open
    f = await loop.run_in_executor(executor, cb)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/thread.py", line 52, in run
    result = self.fn(*self.args, **self.kwargs)
FileNotFoundError: [Errno 2] No such file or directory: 'RekaBot/images/DSC01779.jpg'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/client/session/aiohttp.py", line 177, in make_request
    async with session.post(
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiohttp/client.py", line 1488, in __aenter__
    self._resp: _RetType = await self._coro
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiohttp/client.py", line 770, in _request
    resp = await handler(req)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiohttp/client.py", line 748, in _connect_and_send_request
    await resp.start(conn)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiohttp/client_reqrep.py", line 532, in start
    message, payload = await protocol.read()  # type: ignore[union-attr]
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiohttp/streams.py", line 672, in read
    await self._waiter
aiohttp.client_exceptions.ClientOSError: [Errno 2] Can not write request body for https://api.telegram.org/bot7498846254:AAFM-BD7hCWNahIrVwr3jDcCCCZIgjJX_Uk/sendPhoto

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/scripts/bot.py", line 25, in periodic_messages
    await bot.send_photo(chat_id=user, caption="""
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/client/bot.py", line 3001, in send_photo
    return await self(call, request_timeout=request_timeout)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/client/bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/client/session/base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
  File "/Users/mikhail_kruchinin/Solving-tasks-from-freelancing/RekaBot/.venv/lib/python3.9/site-packages/aiogram/client/session/aiohttp.py", line 184, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 2] Can not write request body for https://api.telegram.org/bot7498846254:AAFM-BD7hCWNahIrVwr3jDcCCCZIgjJX_Uk/sendPhoto
2025-08-30 21:06:45,534 INFO Update id=791623802 is handled. Duration 1071 ms by bot id=7498846254
2025-08-30 21:06:46,964 INFO Update id=791623803 is handled. Duration 724 ms by bot id=7498846254
2025-08-30 21:12:12,206 DEBUG Using selector: KqueueSelector
2025-08-30 21:12:12,206 DEBUG Using selector: KqueueSelector
2025-08-30 21:12:12,207 INFO Start polling
2025-08-30 21:12:12,508 INFO Run polling for bot @chuvarvla_bot id=7498846254 - 'testbot'
2025-08-30 21:12:12,596 WARNING База данных очищена
2025-08-30 21:12:12,831 WARNING База данных очищена
2025-08-30 21:12:12,867 INFO Update id=791623804 is handled. Duration 288 ms by bot id=7498846254
2025-08-30 21:12:13,095 INFO Update id=791623805 is handled. Duration 271 ms by bot id=7498846254
2025-08-30 21:13:20,457 INFO База данных скопирована
2025-08-30 21:13:20,660 INFO Update id=791623806 is handled. Duration 392 ms by bot id=7498846254
